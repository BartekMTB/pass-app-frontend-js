"use strict";(self.webpackChunkpass_app_frontend_js=self.webpackChunkpass_app_frontend_js||[]).push([[539],{6639:(s,e,o)=>{o.d(e,{k:()=>t});var n=o(1134),r=o(2514),a=o(184);const t=()=>{var s;const{register:e,formState:o}=(0,n.Gc)(),{fields:t,append:i,remove:d}=(0,n.Dq)({name:"goods"});return(0,a.jsxs)("div",{children:[o.errors.goods&&(0,a.jsx)("p",{children:null===(s=o.errors.goods.root)||void 0===s?void 0:s.message}),(0,a.jsx)("ul",{children:t.map(((s,n)=>{var t,i,l,u,c,p,m,g;return(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{style:{width:"180px"},...e("goods.".concat(n,".goodsName")),placeholder:"Products name"}),(0,a.jsxs)("select",{...e("goods.".concat(n,".unit")),children:[(0,a.jsx)("option",{value:"",children:"Select unit"}),(0,a.jsx)("option",{value:"KG",children:"KG"}),(0,a.jsx)("option",{value:"L",children:"L"}),(0,a.jsx)("option",{value:"M2",children:"M2"}),(0,a.jsx)("option",{value:"M3",children:"M3"}),(0,a.jsx)("option",{value:"SZT",children:"SZT"})]}),(0,a.jsx)("input",{style:{width:"55px"},className:r.Z.formInputGoods,...e("goods.".concat(n,".quantity")),placeholder:"Quantity"}),(0,a.jsx)("input",{style:{width:"210px"},className:r.Z.formInputGoods,...e("goods.".concat(n,".comments")),placeholder:"Comment"}),(0,a.jsx)("button",{className:r.Z.passBtn,type:"button",onClick:()=>d(n),children:"Delete"}),o.errors.goods&&(0,a.jsx)("p",{children:null===(t=o.errors.goods[n])||void 0===t||null===(i=t.goodsName)||void 0===i?void 0:i.message}),o.errors.goods&&(0,a.jsx)("p",{children:null===(l=o.errors.goods[n])||void 0===l||null===(u=l.unit)||void 0===u?void 0:u.message}),o.errors.goods&&(0,a.jsx)("p",{children:null===(c=o.errors.goods[n])||void 0===c||null===(p=c.quantity)||void 0===p?void 0:p.message}),o.errors.goods&&(0,a.jsx)("p",{children:null===(m=o.errors.goods[n])||void 0===m||null===(g=m.comments)||void 0===g?void 0:g.message})]},s.id)}))}),(0,a.jsx)("button",{className:r.Z.passBtn,type:"button",onClick:()=>{i({name:"append",amount:0})},children:"add a line"})]})}},5363:(s,e,o)=>{o.d(e,{c4:()=>a,gP:()=>t,qI:()=>r,x2:()=>i});const n=o(3233).g.injectEndpoints({endpoints:s=>({getPasses:s.query({query:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return console.log("page",s),{url:"/passes/?limit=6&page=".concat(s)}},providesTags:["Passes"]}),getPassById:s.query({query:s=>({url:"/passes/".concat(s)}),providesTags:["Passes"],transformResponse:s=>(delete s.contactfound._id,delete s.contactfound.passNumber,delete s.contactfound.goods[0]._id,delete s.contactfound.__v,console.log("transform",s),s)}),newPass:s.mutation({query(s){const{...e}=s;return{url:"/passes/add",method:"POST",body:e}},invalidatesTags:["Passes"]}),updatePass:s.mutation({query:s=>{let{_id:e,data:o}=s;return{url:"/passes/".concat(e),method:"PUT",body:o}},invalidatesTags:["Passes"]})})}),{useGetPassesQuery:r,useNewPassMutation:a,useGetPassByIdQuery:t,useUpdatePassMutation:i}=n},2539:(s,e,o)=>{o.r(e),o.d(e,{default:()=>h});var n=o(4270),r=o(1134),a=o(7689),t=o(6639),i=o(2514),d=o(4819),l=o.n(d),u=o(2208),c=o(5363),p=o(184);const m=()=>{var s,e,o,n,d,m,g,h;const[v,{isLoading:j}]=(0,c.c4)(),x=(0,a.s0)(),f=l().object({passNumber:l().string().forbidden(),personOnPass:l().string().required(),personOnPassCompany:l().string().optional(),personOnPassID:l().string().optional(),datePass:l().string().optional(),authorPass:l().string().required(),directionOfOutflow:l().string().valid("doZakladu","naZewnarz").required(),originOfGoods:l().string().required(),baseCreatingPass:l().string().required(),canceled:l().boolean().optional(),goods:l().array().min(1).items({goodsName:l().string().required(),unit:l().string().valid("KG","L","M2","M3","SZT").required(),quantity:l().number().required(),comments:l().string().required()}).required()}),P=(0,r.cI)({defaultValues:{personOnPass:"John",personOnPassCompany:"Example Company",personOnPassID:"FK 3232",datePass:"2024-02-11",authorPass:"Pan Dariusz",directionOfOutflow:"doZakladu",originOfGoods:"Produkcja odpad",baseCreatingPass:"przekazanie odpadu, utylizacja",canceled:!1,goods:[{goodsName:"Makulatura",unit:"KG",quantity:"500",comments:"mutylizacja opon"}]},resolver:(0,u.L)(f)});return(0,p.jsx)(r.RV,{...P,children:(0,p.jsxs)("form",{onSubmit:P.handleSubmit((async s=>{console.log(j);try{const e=await v(s).unwrap();console.log(e),console.log(j),x("/passes")}catch(e){console.log(e)}})),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("personOnPass",{}),placeholder:"Person on Pass"}),(0,p.jsx)("span",{children:null===(s=P.formState.errors.personOnPass)||void 0===s?void 0:s.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("personOnPassCompany"),placeholder:"Person's company name"}),(0,p.jsx)("span",{children:null===(e=P.formState.errors.personOnPassCompany)||void 0===e?void 0:e.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("personOnPassID"),placeholder:"ID numer"}),(0,p.jsx)("span",{children:null===(o=P.formState.errors.personOnPassCompany)||void 0===o?void 0:o.personOnPassID})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("datePass"),placeholder:"Date Pass"}),(0,p.jsx)("span",{children:null===(n=P.formState.errors.personOnPassCompany)||void 0===n?void 0:n.datePass})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("authorPass",{required:"  Please enter pass issuer full name "}),placeholder:"issuing passes"}),(0,p.jsx)("span",{children:null===(d=P.formState.errors.authorPass)||void 0===d?void 0:d.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("select",{style:{width:"220px"},...P.register("directionOfOutflow",{required:"  Please select the direction of goods distribution"}),children:[(0,p.jsx)("option",{value:"",children:"Select directionOfOutflow"}),(0,p.jsx)("option",{value:"doZakladu",children:"doZakladu"}),(0,p.jsx)("option",{value:"naZewnarz",children:"naZewnarz"})]}),(0,p.jsx)("span",{children:null===(m=P.formState.errors.directionOfOutflow)||void 0===m?void 0:m.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("originOfGoods",{required:"  Please enter origin of the goods"}),placeholder:"origin of the goods"}),(0,p.jsx)("span",{children:null===(g=P.formState.errors.originOfGoods)||void 0===g?void 0:g.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:i.Z.formInput,...P.register("baseCreatingPass",{required:"  Please enter basis for creating a pass"}),placeholder:"basis for creating a pass"}),(0,p.jsx)("span",{children:null===(h=P.formState.errors.baseCreatingPass)||void 0===h?void 0:h.message})]}),(0,p.jsx)(t.k,{methods:P}),(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{type:"button",className:i.Z.passBtn,onClick:()=>P.reset(),children:"Reset"}),(0,p.jsx)("button",{type:"submit",className:i.Z.passBtn,children:"Submit"})]})]})})};var g=o(6141);const h=()=>(0,p.jsxs)("div",{className:g.Z.main_div,children:[(0,p.jsx)(n.q,{children:(0,p.jsx)("title",{children:"New Pass"})}),(0,p.jsx)("h1",{children:"Please fill out the form to create a new Pass"}),(0,p.jsx)(m,{})]})},2514:(s,e,o)=>{o.d(e,{Z:()=>n});const n={formlabel:"PassForm_formlabel__sGkis",formInput:"PassForm_formInput__H2Fo2",formInputGoods:"PassForm_formInputGoods__noqZ4",passBtn:"PassForm_passBtn__BPU8o"}},6141:(s,e,o)=>{o.d(e,{Z:()=>n});const n={main_div:"NewPassPage_main_div__4Yi9s"}}}]);
//# sourceMappingURL=539.3900c91e.chunk.js.map