"use strict";(self.webpackChunkpass_app_frontend_js=self.webpackChunkpass_app_frontend_js||[]).push([[983],{6639:(s,e,r)=>{r.d(e,{k:()=>i});var o=r(1134),n=r(2514),a=r(184);const i=()=>{var s;const{register:e,formState:r}=(0,o.Gc)(),{fields:i,append:t,remove:d}=(0,o.Dq)({name:"goods"});return(0,a.jsxs)("div",{children:[r.errors.goods&&(0,a.jsx)("p",{children:null===(s=r.errors.goods.root)||void 0===s?void 0:s.message}),(0,a.jsx)("ul",{children:i.map(((s,o)=>{var i,t,l,u,c,p,m,g;return(0,a.jsxs)("li",{children:[(0,a.jsx)("input",{style:{width:"180px"},...e("goods.".concat(o,".goodsName")),placeholder:"Products name"}),(0,a.jsxs)("select",{...e("goods.".concat(o,".unit")),children:[(0,a.jsx)("option",{value:"",children:"Select unit"}),(0,a.jsx)("option",{value:"KG",children:"KG"}),(0,a.jsx)("option",{value:"L",children:"L"}),(0,a.jsx)("option",{value:"M2",children:"M2"}),(0,a.jsx)("option",{value:"M3",children:"M3"}),(0,a.jsx)("option",{value:"SZT",children:"SZT"})]}),(0,a.jsx)("input",{style:{width:"55px"},className:n.Z.formInputGoods,...e("goods.".concat(o,".quantity")),placeholder:"Quantity"}),(0,a.jsx)("input",{style:{width:"210px"},className:n.Z.formInputGoods,...e("goods.".concat(o,".comments")),placeholder:"Comment"}),(0,a.jsx)("button",{className:n.Z.passBtn,type:"button",onClick:()=>d(o),children:"Delete"}),r.errors.goods&&(0,a.jsx)("p",{children:null===(i=r.errors.goods[o])||void 0===i||null===(t=i.goodsName)||void 0===t?void 0:t.message}),r.errors.goods&&(0,a.jsx)("p",{children:null===(l=r.errors.goods[o])||void 0===l||null===(u=l.unit)||void 0===u?void 0:u.message}),r.errors.goods&&(0,a.jsx)("p",{children:null===(c=r.errors.goods[o])||void 0===c||null===(p=c.quantity)||void 0===p?void 0:p.message}),r.errors.goods&&(0,a.jsx)("p",{children:null===(m=r.errors.goods[o])||void 0===m||null===(g=m.comments)||void 0===g?void 0:g.message})]},s.id)}))}),(0,a.jsx)("button",{className:n.Z.passBtn,type:"button",onClick:()=>{t({name:"append",amount:0})},children:"add a line"})]})}},5363:(s,e,r)=>{r.d(e,{c4:()=>a,gP:()=>i,qI:()=>n,x2:()=>t});const o=r(3233).g.injectEndpoints({endpoints:s=>({getPasses:s.query({query:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return console.log("page",s),{url:"/passes/?limit=6&page=".concat(s)}},providesTags:["Passes"]}),getPassById:s.query({query:s=>({url:"/passes/".concat(s)}),providesTags:["Passes"],transformResponse:s=>s.contactfound}),newPass:s.mutation({query(s){const{...e}=s;return{url:"/passes/add",method:"POST",body:e}},invalidatesTags:["Passes"]}),updatePass:s.mutation({query:s=>{let{_id:e,data:r}=s;return{url:"/passes/".concat(e),method:"PUT",body:r}},invalidatesTags:["Passes"]})})}),{useGetPassesQuery:n,useNewPassMutation:a,useGetPassByIdQuery:i,useUpdatePassMutation:t}=o},1983:(s,e,r)=>{r.r(e),r.d(e,{default:()=>h});var o=r(4270),n=r(1134),a=r(7689),i=r(6639),t=r(2514),d=r(4819),l=r.n(d),u=r(2208),c=r(5363),p=r(184);const m=s=>{var e,r,o,d,m,g,h,v;let{_id:x}=s;const j=(0,a.s0)(),{data:f,isLoading:P,isSuccess:y,isError:_,error:q}=(0,c.gP)(x),[b]=(0,c.x2)(x),Z=l().object({personOnPass:l().string().required(),personOnPassCompany:l().string().optional(),personOnPassID:l().string().optional(),datePass:l().string().optional(),authorPass:l().string().required(),directionOfOutflow:l().string().valid("doZakladu","naZewnarz").required(),originOfGoods:l().string().required(),baseCreatingPass:l().string().required(),canceled:l().boolean().optional(),goods:l().array().min(1).items({goodsName:l().string().required(),unit:l().string().valid("KG","L","M2","M3","SZT").required(),quantity:l().number().required(),comments:l().string().required()}).required()}).options({stripUnknown:!0});let O={};y&&(O=f),console.log(O);const I=(0,n.cI)({values:O,resolver:(0,u.L)(Z)});if(P)return(0,p.jsx)("div",{children:"Loading"});if(_)return(0,p.jsx)("div",{children:q.toString()});return(0,p.jsx)(n.RV,{...I,children:(0,p.jsxs)("form",{onSubmit:I.handleSubmit((async s=>{try{await b({_id:x,data:s}).unwrap(),j("/passes")}catch(e){console.log(e)}})),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("personOnPass",{}),placeholder:"Person on Pass"}),(0,p.jsx)("span",{children:null===(e=I.formState.errors.personOnPass)||void 0===e?void 0:e.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("personOnPassCompany"),placeholder:"Person's company name"}),(0,p.jsx)("span",{children:null===(r=I.formState.errors.personOnPassCompany)||void 0===r?void 0:r.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("personOnPassID"),placeholder:"ID numer"}),(0,p.jsx)("span",{children:null===(o=I.formState.errors.personOnPassCompany)||void 0===o?void 0:o.personOnPassID})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("datePass"),placeholder:"Date Pass"}),(0,p.jsx)("span",{children:null===(d=I.formState.errors.personOnPassCompany)||void 0===d?void 0:d.datePass})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("authorPass",{required:"  Please enter pass issuer full name "}),placeholder:"issuing passes"}),(0,p.jsx)("span",{children:null===(m=I.formState.errors.authorPass)||void 0===m?void 0:m.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("select",{style:{width:"220px"},...I.register("directionOfOutflow",{required:"  Please select the direction of goods distribution"}),children:[(0,p.jsx)("option",{value:"",children:"Select directionOfOutflow"}),(0,p.jsx)("option",{value:"doZakladu",children:"doZakladu"}),(0,p.jsx)("option",{value:"naZewnarz",children:"naZewnarz"})]}),(0,p.jsx)("span",{children:null===(g=I.formState.errors.directionOfOutflow)||void 0===g?void 0:g.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("originOfGoods",{required:"  Please enter origin of the goods"}),placeholder:"origin of the goods"}),(0,p.jsx)("span",{children:null===(h=I.formState.errors.originOfGoods)||void 0===h?void 0:h.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("input",{className:t.Z.formInput,...I.register("baseCreatingPass",{required:"  Please enter basis for creating a pass"}),placeholder:"basis for creating a pass"}),(0,p.jsx)("span",{children:null===(v=I.formState.errors.baseCreatingPass)||void 0===v?void 0:v.message})]}),(0,p.jsx)(i.k,{methods:I}),(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{type:"button",className:t.Z.passBtn,onClick:()=>I.reset(),children:"Reset"}),(0,p.jsx)("button",{type:"submit",className:t.Z.passBtn,children:"Submit"})]})]})})};var g=r(6141);const h=()=>{const s=(0,a.TH)();return(0,p.jsxs)("div",{className:g.Z.main_div,children:[(0,p.jsx)(o.q,{children:(0,p.jsx)("title",{children:"Edit Pass"})}),(0,p.jsx)("h1",{children:"Please edit form field to update current Pass"}),(0,p.jsx)(m,{_id:s.state._id})]})}},2514:(s,e,r)=>{r.d(e,{Z:()=>o});const o={formlabel:"PassForm_formlabel__sGkis",formInput:"PassForm_formInput__H2Fo2",formInputGoods:"PassForm_formInputGoods__noqZ4",passBtn:"PassForm_passBtn__BPU8o"}},6141:(s,e,r)=>{r.d(e,{Z:()=>o});const o={main_div:"NewPassPage_main_div__4Yi9s"}}}]);
//# sourceMappingURL=983.f8c92180.chunk.js.map