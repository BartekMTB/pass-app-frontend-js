{"version":3,"file":"static/js/846.dc673cbe.chunk.js","mappings":"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","sources":["features/passes/passesApiSlice.js","webpack://pass-app-frontend-js/./src/pages/passesPage.module.css?0de8","webpack://pass-app-frontend-js/./src/features/passes/PassesList.module.css?2e38","features/passes/PassesList.jsx","pages/PassesPage.jsx"],"sourcesContent":["import { apiSlice } from \"../../app/apiSlice\";\n\nexport const passesApiSlice = apiSlice.injectEndpoints({\n  endpoints: (builder) => ({\n    getPasses: builder.query({\n      query: (page = 1) => {\n        console.log(\"page\", page);\n        return {\n          url: `/passes/?limit=6&page=${page}`,\n        };\n      },\n      providesTags: [\"Passes\"],\n    }),\n    getPassById: builder.query({\n      query: (_id) => {\n        return {\n          url: `/passes/${_id}`,\n        };\n      },\n      providesTags: [\"Passes\"],\n      transformResponse: (response) => {\n        //  delete response.contactfound._id;\n        //  delete response.contactfound.passNumber;\n        //  delete response.contactfound.goods[0]._id;\n        //  delete response.contactfound.__v;\n        // because in joi striUnknown: true\n\n        //do poprawy- petla w goods\n        //  console.log(\"transform\", response);\n        return response.contactfound;\n      },\n    }),\n    newPass: builder.mutation({\n      query(data) {\n        const { ...body } = data;\n        return {\n          url: `/passes/add`,\n          method: \"POST\",\n          body,\n        };\n      },\n      invalidatesTags: [\"Passes\"],\n    }),\n    updatePass: builder.mutation({\n      query: ({ _id, data }) => {\n        return {\n          url: `/passes/${_id}`,\n          method: \"PUT\",\n          body: data,\n        };\n      },\n      invalidatesTags: [\"Passes\"],\n    }),\n  }),\n});\n\nexport const {\n  useGetPassesQuery,\n  useNewPassMutation,\n  useGetPassByIdQuery,\n  useUpdatePassMutation,\n} = passesApiSlice;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"passesPage_container__066C8\",\"title\":\"passesPage_title__1E-IE\"};","// extracted by mini-css-extract-plugin\nexport default {\"passesList\":\"PassesList_passesList__QvG5l\",\"passesItem\":\"PassesList_passesItem__z2KQG\",\"passBtn\":\"PassesList_passBtn__Ehkg5\"};","import * as React from \"react\";\n//import { useEffect } from \"react\";\nimport { useGetPassesQuery } from \"./passesApiSlice\";\nimport css from \"./PassesList.module.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { MdArrowBack, MdArrowForward } from \"react-icons/md\";\nimport { Box, Button, HStack, Icon } from \"@chakra-ui/react\";\n\nexport const PassesList = () => {\n  const navigate = useNavigate();\n  const [page, setPage] = React.useState(1);\n  const {\n    data: pass,\n    isLoading,\n    isSuccess,\n    isError,\n    isFetching,\n    error,\n    //  refetch,\n  } = useGetPassesQuery(page); //queryParams\n\n  let content = \"\";\n\n  if (isLoading) {\n    content = <p>Loading...</p>;\n  } else if (isError) {\n    content = <div>{error.toString()}</div>;\n  } else if (isSuccess) {\n    content = pass.results;\n  }\n\n  /*  useEffect(() => {\n    refetch();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); */\n\n  return (\n    <div>\n      <HStack spacing=\"14px\">\n        <Button\n          onClick={() => setPage((prev) => prev - 1)}\n          isLoading={isFetching}\n          isDisabled={page == 1}\n        >\n          <Icon as={MdArrowBack} />\n        </Button>\n        <Button\n          onClick={() => setPage((prev) => prev + 1)}\n          isLoading={isFetching}\n          isDisabled={page === content.totalPages}\n        >\n          <Icon as={MdArrowForward} />\n        </Button>\n        <Box>{`${page} / ${content.totalPages}`}</Box>\n      </HStack>\n      <ul className={css.passesList}>\n        {Array.isArray(content.docs)\n          ? content.docs.map(\n              ({ _id, passNumber, personOnPassCompany, baseCreatingPass }) => (\n                <li className={css.passesItem} key={_id}>\n                  <p>\n                    {passNumber}, {personOnPassCompany}, {baseCreatingPass}\n                  </p>\n                  <button\n                    className={css.passBtn}\n                    type=\"button\"\n                    onClick={() => {\n                      console.log(\"clicked \", _id);\n                      navigate(\"/editpass\", { state: { _id: _id } });\n                    }}\n                  >\n                    Edit\n                  </button>\n                  <button\n                    className={css.passBtn}\n                    type=\"button\"\n                    onClick={() => {\n                      console.log(\"clicked \", _id);\n                      navigate(\"/printout\", { state: { _id: _id } });\n                    }}\n                  >\n                    Print\n                  </button>\n                </li>\n              )\n            )\n          : null}\n      </ul>\n    </div>\n  );\n};\n","import css from \"./passesPage.module.css\";\nimport { Helmet } from \"react-helmet\";\n//import { useGetPassesQuery } from '../features/passes/passesApiSlice'\nimport { PassesList } from \"../features/passes/PassesList\";\n\nconst PassesHome = () => {\n  return (\n    <div className={css.container}>\n      <Helmet>\n        <title>Passes list page</title>\n      </Helmet>\n      <div>\n        <PassesList />\n      </div>\n    </div>\n  );\n};\n\nexport default PassesHome;\n"],"names":["passesApiSlice","apiSlice","injectEndpoints","endpoints","builder","getPasses","query","page","arguments","length","undefined","console","log","url","concat","providesTags","getPassById","_id","transformResponse","response","contactfound","newPass","mutation","data","body","method","invalidatesTags","updatePass","_ref","useGetPassesQuery","useNewPassMutation","useGetPassByIdQuery","useUpdatePassMutation","PassesList","navigate","useNavigate","setPage","React","pass","isLoading","isSuccess","isError","isFetching","error","content","_jsx","children","toString","results","_jsxs","HStack","spacing","Button","onClick","prev","isDisabled","Icon","as","MdArrowBack","totalPages","MdArrowForward","Box","className","css","Array","isArray","docs","map","passNumber","personOnPassCompany","baseCreatingPass","type","state","PassesHome","Helmet"],"sourceRoot":""}